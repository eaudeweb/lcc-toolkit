{% extends "index.html" %}

{% load static %}
{% block page-title %}Register new account{% endblock %}

{% block content %}
<div class="row">
  <div class="col-md-6 col-sm-6 col-xs-12 login-wrapper">
    <div class="panel panel-info">
      <div class="panel-body">
        {% if success %}
        <p>Thank you! Your registration has been received. An email has been sent to you with a link 
           to create your login details. Please be sure to check your junk/spam folders.</p>
        <p>Please contact <a href="mailto:unep-law-climatelawtoolkit@un.org">unep-law-climatelawtoolkit@un.org</a> in case of any problems or technical difficulties.</p>
        {% else %}
        <form role="form" method="POST">
          {% csrf_token %}

          <div class="form-group">
            <label for="{{ form.first_name.id_for_label }}">{{ form.first_name.label }}</label>
            {{ form.first_name }}
            {% for error in form.first_name.errors %}
            <p class="help-block form-field-error">
              {{ error|escape }}
            </p>
            {% endfor %}
          </div>

          <div class="form-group">
            <label for="{{ form.last_name.id_for_label }}">{{ form.last_name.label }}</label>
            {{ form.last_name }}
            {% for error in form.last_name.errors %}
            <p class="help-block form-field-error">
              {{ error|escape }}
            </p>
            {% endfor %}
          </div>

          <div class="form-group">
            <label for="{{ form.email.id_for_label }}">{{ form.email.label }}</label>
            {{ form.email }}
            {% for error in form.email.errors %}
            <p class="help-block form-field-error">
              {{ error|escape }}
            </p>
            {% endfor %}
          </div>

          <div class="form-group">
            <label for="{{ form.affiliation.id_for_label }}">{{ form.affiliation.label }}</label>
            {{ form.affiliation }}
            {% for error in form.affiliation.errors %}
            <p class="help-block form-field-error">
              {{ error|escape }}
            </p>
            {% endfor %}
          </div>

          <div class="form-group">
            <label for="{{ form.position.id_for_label }}">{{ form.position.label }}</label>
            {{ form.position }}
            {% for error in form.position.errors %}
            <p class="help-block form-field-error">
              {{ error|escape }}
            </p>
            {% endfor %}
          </div>

          <div class="form-group">
            <label for="{{ form.home_country.id_for_label }}">{{ form.home_country.label }}</label>
            {{ form.home_country }}
            {% for error in form.home_country.errors %}
            <p class="help-block form-field-error">
              {{ error|escape }}
            </p>
            {% endfor %}
          </div>

          <div class="form-group">
            <label for="{{ form.role.id_for_label }}">{{ form.role.label }}</label>
            {{ form.role }}
            {% for error in form.role.errors %}
            <p class="help-block form-field-error">
              {{ error|escape }}
            </p>
            {% endfor %}
          </div>

          <div class="form-group" style="display: none;" id="other_role">
            <label for="{{ form.other_role.id_for_label }}">{{ form.other_role.label }}</label>
            {{ form.other_role }}
            {% for error in form.other_role.errors %}
            <p class="help-block form-field-error">
              {{ error|escape }}
            </p>
            {% endfor %}
          </div>

          <div class="form-group">
            <label for="{{ form.captcha.id_for_label }}">{{ form.captcha.label }}</label>
            {{ form.captcha }}
            {% for error in form.captcha.errors %}
            <p class="help-block form-field-error">
              {{ error|escape }}
            </p>
            {% endfor %}
          </div>

          <button type="submit" class="btn btn-primary" id="login-btn">Request registration</button>
        </form>
        {% endif %}
      </div>
    </div>
  </div>
  {% if not success %}
    <p style="margin-left: auto; margin-right: auto;margin-top: 2%; font-size: 'small'">If you experience any technical difficulties, please email <a href="mailto:unep-law-climatelawtoolkit@un.org">unep-law-climatelawtoolkit@un.org</a> .</p>
  {% endif %}
</div>
{% endblock %}

{% block extra-scripts %}
    <script>
      $(function(){
    $('#id_role').change(function(){
        let role = $(this).val();
        let other = document.getElementById('other_role');
        if (role === 'Other'){
            other.style.display = 'block';
        } else {
            other.style.display = 'none';
        }
    });
});
    </script>

{% endblock %}